<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">iPhoneSimulator</Platform>
    <ProjectGuid>{80A96B52-6758-4BDB-B0B4-CEA4CA155C60}</ProjectGuid>
    <ProjectTypeGuids>{FEACFBD2-3405-455C-9665-78FE426C6842};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
    <TemplateGuid>{440aa056-593a-4519-8708-27081dee632f}</TemplateGuid>
    <OutputType>Exe</OutputType>
    <RootNamespace>AnylineXamarinAppiOS</RootNamespace>
    <IPhoneResourcePrefix>Resources</IPhoneResourcePrefix>
    <AssemblyName>AnylineXamarinAppiOS</AssemblyName>
    <MtouchHttpClientHandler>NSUrlSessionHandler</MtouchHttpClientHandler>
    <NuGetPackageImportStamp>
    </NuGetPackageImportStamp>
    <ProvisioningType>manual</ProvisioningType>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|iPhoneSimulator' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\iPhoneSimulator\Debug</OutputPath>
    <DefineConstants>DEBUG</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <ConsolePause>false</ConsolePause>
    <MtouchArch>x86_64</MtouchArch>
    <MtouchLink>None</MtouchLink>
    <MtouchDebug>true</MtouchDebug>
    <CreatePackage>false</CreatePackage>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|iPhoneSimulator' ">
    <DebugType>none</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\iPhoneSimulator\Release</OutputPath>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <MtouchLink>None</MtouchLink>
    <MtouchArch>x86_64</MtouchArch>
    <ConsolePause>false</ConsolePause>
    <CreatePackage>false</CreatePackage>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|iPhone' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\iPhone\Debug</OutputPath>
    <DefineConstants>DEBUG</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <ConsolePause>false</ConsolePause>
    <MtouchArch>ARM64</MtouchArch>
    <CodesignKey>iPhone Developer</CodesignKey>
    <MtouchDebug>true</MtouchDebug>
    <MtouchLink>Full</MtouchLink>
    <CodesignExtraArgs />
    <CodesignResourceRules />
    <MtouchNoSymbolStrip>false</MtouchNoSymbolStrip>
    <CreatePackage>false</CreatePackage>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|iPhone' ">
    <DebugType>none</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\iPhone\Release</OutputPath>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <MtouchArch>ARM64</MtouchArch>
    <ConsolePause>false</ConsolePause>
    <CodesignKey>iPhone Distribution</CodesignKey>
    <CodesignEntitlements>Entitlements.plist</CodesignEntitlements>
    <MtouchLink>SdkOnly</MtouchLink>
    <CreatePackage>false</CreatePackage>
  </PropertyGroup>
  <PropertyGroup>
    <StartupObject>AnylineExamples.iOS.Application</StartupObject>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(RunConfiguration)' == 'Default' ">
    <AppExtensionDebugBundleId />
  </PropertyGroup>
  <ItemGroup>
    <Compile Include="NFCScanViewController.cs" />
    <Compile Include="ScanResultDelegate.cs" />
    <Compile Include="ScanViewController.cs" />
    <Compile Include="AnylineViewController.cs" />
    <Compile Include="AnylineViewController.designer.cs">
      <DependentUpon>AnylineViewController.cs</DependentUpon>
    </Compile>
    <Compile Include="Main.cs" />
    <Compile Include="AppDelegate.cs" />
    <None Include="Entitlements.plist" />
    <None Include="Info.plist" />
    <Compile Include="MainController.cs" />
    <Compile Include="MainController.designer.cs">
      <DependentUpon>MainController.cs</DependentUpon>
    </Compile>
    <Compile Include="Properties\AssemblyInfo.cs" />
    <InterfaceDefinition Include="MainStoryboard.storyboard" />
    <Compile Include="ObjectExtensions.cs" />
    <Compile Include="ResultViewController.cs" />
    <InterfaceDefinition Include="Resources\LaunchScreen.xib" />
  </ItemGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Core" />
    <Reference Include="Xamarin.iOS" />
  </ItemGroup>
  <ItemGroup>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Contents.json">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon1024.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon167.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon120.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon152.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon180.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon29.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon40.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon58.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon76.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon80.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon87.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon20.png">
      <Visible>false</Visible>
    </ImageAsset>
    <ImageAsset Include="Assets.xcassets\AppIcon.appiconset\Icon60.png">
      <Visible>false</Visible>
    </ImageAsset>
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Anyline.Xamarin.SDK.iOS" Version="51.1.0" />
    <PackageReference Include="Newtonsoft.Json" Version="13.0.1" />
  </ItemGroup>
  <ItemGroup>
    <Folder Include="Resources\" />
  </ItemGroup>
  <ItemGroup>
    <BundleResource Include="Resources\tire_size_config.json" />
    <BundleResource Include="Resources\tire_make_config.json" />
    <BundleResource Include="Resources\energy_dial_config.json" />
    <BundleResource Include="Resources\mro_usnr_config.json" />
    <BundleResource Include="Resources\tire_commercial_tire_id_config.json" />
    <BundleResource Include="Resources\id_config_universal.json" />
    <BundleResource Include="Resources\id_config_cyrillic.json" />
    <BundleResource Include="Resources\id_config_mrz.json" />
    <BundleResource Include="Resources\vehicle_config_license_plate_eu.json" />
    <BundleResource Include="Resources\tire_tin_universal_config.json" />
    <BundleResource Include="Resources\vehicle_vin_config.json" />
    <BundleResource Include="Resources\mro_shipping_container_vertical_config.json" />
    <BundleResource Include="Resources\vehicle_registration_certificate_config.json" />
    <BundleResource Include="Resources\workflows_config_serial_scanning.json" />
    <BundleResource Include="Resources\energy_analog_digital_config.json" />
    <BundleResource Include="Resources\vehicle_config_license_plate_us.json" />
    <BundleResource Include="Resources\others_config_barcode.json" />
    <BundleResource Include="Resources\id_config_arabic.json" />
    <BundleResource Include="Resources\vehicle_config_license_plate_africa.json" />
    <BundleResource Include="Resources\mro_shipping_container_horizontal_config.json" />
    <BundleResource Include="Resources\tire_tin_dot_config.json" />
    <BundleResource Include="Resources\workflows_config_parallel_scanning.json" />
    <BundleResource Include="Resources\id_config_jlp.json" />
    <BundleResource Include="Resources\workflows_config_parallel_first_scan.json" />
  </ItemGroup>
  <Import Project="..\AnylineExamples.Shared\AnylineExamples.Shared.projitems" Label="Shared" />
  <Import Project="$(MSBuildExtensionsPath)\Xamarin\iOS\Xamarin.iOS.CSharp.targets" />
  <Target Name="BeforeBuild" Condition=" '$(RUNNING_ON_CICD)' == 'true' ">
    <XmlPoke XmlInputPath="Info.plist" Query="//dict/key[. = 'CFBundleVersion']/following-sibling::string[1]" Value="$(BUNDLE_VERSION_IOS)" />
    <XmlPoke XmlInputPath="Info.plist" Query="//dict/key[. = 'CFBundleShortVersionString']/following-sibling::string[1]" Value="$(ANYLINE_IOS_SDK_VERSION)" />
  </Target>
   
  <!-- 
  Starting with Anyline SDK 41, to reduce the final app size
  just add the folowing target to your ".csproj" file and remove the modules not required from the "ModulesToKeep" property.
  please refer to https://documentation.anyline.com/toc/platforms/xamarin/reduce_app_size.html for documentation 
  -->
  <Target Name="FilterAnylineAssets" BeforeTargets="_CreateAssetPackManifest">
    <MSBuild Properties="ModulesToKeep=ocr;barcode;document;energy;id;license_plate;tire" Projects="$(MSBuildProjectFile)" Targets="_RemoveAnylineModules" />
  </Target>

  <!-- 
    For Anyline SDK <= 40, use the following target to remove modules that are not required:

    <Target Name="RemoveModules" BeforeTargets="_CreateAssetPackManifest"> 
      <RemoveDir Directories="$(AppBundleDir)\AnylineResources.bundle\module_anyline_ocr" />
      <RemoveDir Directories="$(AppBundleDir)\AnylineResources.bundle\module_barcode" />
      <RemoveDir Directories="$(AppBundleDir)\AnylineResources.bundle\module_document" />
      <RemoveDir Directories="$(AppBundleDir)\AnylineResources.bundle\module_energy" />
      <RemoveDir Directories="$(AppBundleDir)\AnylineResources.bundle\module_id" />
      <RemoveDir Directories="$(AppBundleDir)\AnylineResources.bundle\module_license_plate" />
      <RemoveDir Directories="$(AppBundleDir)\AnylineResources.bundle\module_tire" />
    </Target>
  -->
    
</Project>